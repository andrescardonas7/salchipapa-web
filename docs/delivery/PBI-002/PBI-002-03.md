# PBI-002-03: Crear lib/email.ts con validacion de dominios

**PBI:** [PBI-002](../backlog.md#pbi-002-migracion-a-email-otp-con-supabase-auth)  
**Estado:** InProgress  
**Prioridad:** Alta

---

## Descripcion

Crear una utilidad para validar dominios permitidos de email segun el plan del proyecto.

## Alcance

### En alcance

- `src/lib/email.ts`
- Tests unitarios con TDD

### Fuera de alcance

- Validacion por MX o verificacion externa
- UI o integraciones con Supabase

---

## Criterios de aceptacion

- [ ] Dominios exactos permitidos: gmail.com, outlook.com, icloud.com
- [ ] Dominios educativos `.edu` y `.edu.xx` permitidos
- [ ] Emails sin dominio o invalidos se rechazan
- [ ] Tests unitarios con cobertura >= 80%

---

## Test Plan

### Unit tests

- `isAllowedEmail` acepta dominios permitidos exactos
- `isAllowedEmail` acepta dominios `.edu` y `.edu.xx`
- `isAllowedEmail` rechaza dominios no permitidos
- `isAllowedEmail` rechaza emails sin `@` o sin dominio
# PBI-002-03: Crear lib/email.ts con validacion de dominios

**PBI:** [PBI-002](../backlog.md#pbi-002-migracion-a-email-otp-con-supabase-auth)
**Estado:** InProgress
**Prioridad:** Alta

---

## Descripcion

Crear una utilidad para validar dominios permitidos de email segun el plan del proyecto.

## Alcance

### En alcance

- `src/lib/email.ts`
- Tests unitarios con TDD

### Fuera de alcance

- Validacion por MX o verificacion externa
- UI o integraciones con Supabase

---

## Criterios de aceptacion

- [ ] Dominios exactos permitidos: gmail.com, outlook.com, icloud.com
- [ ] Dominios educativos `.edu` y `.edu.xx` permitidos
- [ ] Emails sin dominio o invalidos se rechazan
- [ ] Tests unitarios con cobertura >= 80%

---

## Test Plan

### Unit tests

- `isAllowedEmail` acepta dominios permitidos exactos
- `isAllowedEmail` acepta dominios `.edu` y `.edu.xx`
- `isAllowedEmail` rechaza dominios no permitidos
- `isAllowedEmail` rechaza emails sin `@` o sin dominio

# PBI-002-03: Crear lib/email.ts con validacion de dominios

**PBI:** [PBI-002](../backlog.md#pbi-002-migracion-a-email-otp-con-supabase-auth)
**Estado:** InProgress
**Prioridad:** Alta

---

## Descripcion

Crear una utilidad para validar dominios permitidos de email segun el plan del proyecto.

## Alcance

### En alcance

- `src/lib/email.ts`
- Tests unitarios con TDD

### Fuera de alcance

- Validacion por MX o verificacion externa
- UI o integraciones con Supabase

---

## Criterios de aceptacion

- [ ] Dominios exactos permitidos: gmail.com, outlook.com, icloud.com
- [ ] Dominios educativos `.edu` y `.edu.xx` permitidos
- [ ] Emails sin dominio o invalidos se rechazan
- [ ] Tests unitarios con cobertura >= 80%

---

## Test Plan

### Unit tests

- `isAllowedEmail` acepta dominios permitidos exactos
- `isAllowedEmail` acepta dominios `.edu` y `.edu.xx`
- `isAllowedEmail` rechaza dominios no permitidos
- `isAllowedEmail` rechaza emails sin `@` o sin dominio
