# PBI-002-02: Crear clientes Supabase (server + client)

**PBI:** [PBI-002](../backlog.md#pbi-002-migracion-a-email-otp-con-supabase-auth)
**Estado:** Done
**Prioridad:** Alta

---

## Descripcion

Crear clientes de Supabase para uso en servidor y navegador, con validacion de variables de entorno y pruebas unitarias.

## Alcance

### En alcance

- `src/lib/supabase/server.ts`
- `src/lib/supabase/client.ts`
- Tests unitarios con TDD

### Fuera de alcance

- Flujos de UI o rutas API
- Migraciones de base de datos

---

## Criterios de aceptacion

- [x] Cliente server funciona con cookies de Next.js
- [x] Cliente client usa anon key
- [x] Validacion de variables de entorno
- [x] Tests unitarios con cobertura >= 80%

---

## Test Plan

### Unit tests

- `createSupabaseBrowserClient` falla si faltan variables de entorno
- `createSupabaseServerClient` falla si faltan variables de entorno
- Ambos clientes retornan instancia cuando hay envs validas
