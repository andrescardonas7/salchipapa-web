# PBI-005-01: Hardening seguridad + auditorías + limpieza repo

## Contexto

Hay hallazgos de seguridad y DX que bloquean “production-ready”: telemetría accidental en config, defaults inseguros de secrets, endpoints que pueden quedar abiertos por mala configuración, lockfiles mixtos y ruido en repo.

## Alcance

- Eliminar telemetría/debug accidental.
- Endurecer secrets críticos (sin fallback inseguro).
- Proteger endpoints sensibles:
  - Admin login: rate limit.
  - Cron: requiere secret siempre.
  - Export: mitigación CSV injection + escape correcto.
- Mejoras de privacidad: no almacenar IP/UA en claro en auditoría.
- Limpieza de repo: lockfiles coherentes con `pnpm`, ignorar `.pnpm-store` y `package-lock.json`.
- Ejecutar `pnpm audit` y `npm audit` y registrar hallazgos.

## Criterios de aceptación

- `pnpm run check` pasa.
- `pnpm audit` ejecutado y sin vulnerabilidades críticas sin plan.
- `npm audit` ejecutado y sin vulnerabilidades críticas sin plan.
- No existe `fetch()`/telemetría inesperada en archivos de configuración.

## Test plan

- Unit (Vitest):
  - Ejecutar `pnpm test` y mantener verde.
- Lint/Types:
  - Ejecutar `pnpm lint` y `pnpm typecheck` (sin errores).
- Auditorías:
  - Ejecutar `pnpm audit` (guardar salida/resumen).
  - Ejecutar `npm audit` (guardar salida/resumen).

